<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Chakra - DCS Auction</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="wrap row">
      <div class="title">üèÜ Chakra '25 ‚Äî <span class="muted">DCS Sports</span></div>
      <div id="live-code-display" class="live-code-container"></div>
      <div class="spacer"></div>
      <div class="header-buttons">
        <button id="btnImport" class="ghost">Import</button>
        <button id="btnExport" class="ghost">Export CSV</button>
        <button id="btnBroadcast" class="success">Broadcast Live</button>
        <button id="btnSettings" class="ghost">Settings</button>
        <button id="btnUndo" class="danger">Undo Last Sale</button>
      </div>
    </div>
  </header>

  <main class="wrap" style="padding-bottom:24px;">
    <div class="grid">
      <section class="card">
        <h3>Teams</h3>
        <div id="teams" class="teams"></div>
        <div class="note" style="margin-top:8px">Tip: Click a team to make it the active bidder.</div>
      </section>

      <section class="card">
        <h3>Auction</h3>
        <div class="auction-panel">
          <div class="timer-container">
            <div class="timer-label">Timer</div>
            <div class="timer" id="timer"><span id="timeLeft">--</span></div>
          </div>
          
          <div class="auction-info">
            <div class="info-row">
              <div class="info-label">Name</div>
              <div class="muted" id="activePlayerLabel">No player nominated</div>
            </div>
            
            <div class="info-row">
              <div class="info-label">Sports</div>
              <div id="activePlayerSports" class="muted">-</div>
            </div>
            
            <div class="info-row">
              <div class="info-label">Achievements</div>
              <div id="activePlayerAchievements" class="muted">-</div>
            </div>
            
            <div class="price-container">
              <div class="price" id="currentBid">$0M</div>
              <div class="chips" id="leadingTeam"></div>
            </div>
          </div>
        </div>
        
        <div class="bid-controls">
          <div class="bid-buttons">
            <button id="bid1" class="primary">+ $1M</button>
            <button id="bid10" class="primary">+ $10M</button>
            <input id="customBid" type="number" min="0" placeholder="Custom increment (M)" />
            <button id="bidCustom" class="primary">Add</button>
          </div>
          
          <div class="action-buttons">
            <button id="sellBtn" class="success">Sell to Team</button>
            <button id="resetBid" class="ghost">Reset Bid</button>
          </div>
        </div>
      </section>
    </div>

    <section class="card" style="margin-top:16px">
      <h3>Players</h3>
      <div class="filters" style="margin-bottom:8px">
        <input type="text" id="search" placeholder="Search name‚Ä¶" />
        <select id="filterCourse">
          <option value="">All Courses</option>
          <option>B.Tech</option>
          <option>B.Arch</option>
          <option>M.Tech</option>
          <option>PhD</option>
        </select>
        <select id="filterYear">
          <option value="">All Years</option>
          <option>1</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
        </select>
        <select id="filterGender">
          <option value="">All Genders</option>
          <option>Male</option>
          <option>Female</option>
        </select>
        
        <select id="filterTeam">
          <option value="">All Teams</option>
        </select>
        <select id="filterStatus">
          <option value="">All Status</option>
          <option>Available</option>
          <option>Sold</option>
        </select>
        <div class="spacer"></div>
        <button id="nominateBtn" class="warning">Nominate Player</button>
        <button id="randomNominateBtn" class="primary">üé≤ Random Player</button>
      </div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Course</th>
              <th>Year</th>
              <th>Gender</th>
              <th>Sports</th>
              <th>Achievements</th>
              <th>Base Value</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody id="playerBody"></tbody>
        </table>
      </div>
      <div class="note">Select a player row, then click <span class="kbd">Nominate Player</span> to start bidding. Active player row will glow.</div>
    </section>

    <div class="footer">All data is in-memory until you export. No servers. No tracking. üéØ</div>
  </main>

  <div class="modal-backdrop" id="importModal">
    <div class="modal">
      <div class="row"><h3>Import Data</h3><div class="spacer"></div><button class="ghost" onclick="closeModal('importModal')">Close</button></div>
      <p class="note">Import Players (CSV or JSON). For CSV, headers: <b>Name,Course,Year,Gender,Sports,Achievements,BaseValue</b>. Optionally import Teams via CSV.</p>
      <div class="row" style="align-items:flex-start; gap:16px">
        <div class="row" style="align-items:flex-start; gap:16px">
          <div class="card" style="flex:1">
            <h3>Players</h3>
            <input type="file" id="playersFile" accept=".csv,.json" />
            <div class="note">CSV example:<br>Riya Nair,B.Arch,2,Female,Basketball,Bowling king,1</div>
            <button class="primary" id="importPlayersBtn" style="margin-top:8px">Import Players</button>
          </div>
          <div class="card" style="flex:1">
            <h3>Teams (CSV)</h3>
            <input type="file" id="teamsFile" accept=".csv" />
            <div class="note">Headers: <b>Name,InitialBudget,MaleSlots,FemaleSlots</b><br>Example: Falcons,500,12,5</div>
            <button class="primary" id="importTeamsBtn" style="margin-top:8px">Import Teams</button>
          </div>
          <div class="card" style="flex:1">
            <h3>Resume Auction from CSV</h3>
            <input type="file" id="resumeFile" accept=".csv" />
            <div class="note">Select an `auction_summary.csv` file you exported previously to restore your progress.</div>
            <button class="success" id="resumeBtn" style="margin-top:8px">Load Progress</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="modal-backdrop" id="settingsModal">
    <div class="modal">
      <div class="row"><h3>Auction Settings</h3><div class="spacer"></div><button class="ghost" onclick="closeModal('settingsModal')">Close</button></div>
      <div class="row" style="gap:12px; flex-wrap:wrap">
        <label>Round Timer (seconds)<br>
          <input id="settingTimer" type="number" min="5" value="15" />
        </label>
        <label>Quick Bid / Team Click ($M)<br>
          <input id="settingStep1" type="number" min="1" value="1" />
        </label>
        <label>Primary Bid Button ($M)<br>
          <input id="settingStep10" type="number" min="1" value="10" />
        </label>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="success" id="saveSettings">Save</button>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  
  <script src="script.js"></script>
</body>
</html>
